{% extends 'base.html' %}

{% block title %}{{ book.title }} - BusterDev Books{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        {% if book.image %}
            <img src="{{ book.image.url }}" class="img-fluid rounded" alt="{{ book.title }}">
        {% endif %}
    </div>
    <div class="col-md-8">
        <h1>{{ book.title }}</h1>
        <p><strong>Expert:</strong> {{ book.expert }}</p>
        <p><strong>Authors:</strong> 
            {% for author in book.authors.all %}
                {{ author.full_name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
        <p><strong>Categories:</strong> 
            {% for cat in book.category.all %}
                {{ cat.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
        <p><strong>Year:</strong> {{ book.created_year }}</p>
        <p>{{ book.description|linebreaks }}</p>

        {% if book.file %}
            {% if user.is_authenticated %}
                <a href="{{ book.file.url }}" class="btn btn-success" download>Download</a>
            {% else %}
                <a href="{% url 'login' %}?next={{ request.path }}" class="btn btn-warning">
                    Login to Download
                </a>
            {% endif %}
        {% endif %}
    </div>
</div>
<a href="{% url 'books:home' %}" class="btn btn-secondary mt-3">ðŸ”™ Back to Home</a>
{% endblock %}